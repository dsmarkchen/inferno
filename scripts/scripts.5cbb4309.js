"use strict";angular.module("infernoApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(e,t){e.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/inferno/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/inferno/main",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/inferno/tx",{templateUrl:"views/tx.html",controller:"TxCtrl",controllerAs:"tx"}).when("/tx",{templateUrl:"views/tx.html",controller:"TxCtrl",controllerAs:"tx"}).when("/inferno/rx",{templateUrl:"views/rx.html",controller:"RxCtrl",controllerAs:"rx"}).when("/rx",{templateUrl:"views/rx.html",controller:"RxCtrl",controllerAs:"rx"}).otherwise({redirectTo:"/"})}]),angular.module("infernoApp").filter("split",function(){return function(e){var t=e.split(/([!,.;?-])/g),o="",a="",n="";return t.forEach(function(e){if(o+=e,52<e.length){return o.split(/(that|where|which|when|who)/g).forEach(l),a+=n,void(o="")}((a+=e).endsWith("--")&&"-"==e||"?"==e||";"==e||"."==e||"!"==e||","==e)&&(a+="\n",o="")}),console.log("line_index:0"),a;function l(e){if("that"==e||"where"==e||"when"==e||"who"==e||"which"==e)return n+="\n ",void(n+=e);n+=e}}}).controller("MainCtrl",["$scope","$location",function(e,t){var o,a;e.txTotalSymbols=localStorage.getItem("totalSymbols"),e.txTotalLHs=localStorage.getItem("totalLHs"),e.rxTotalSymbols=localStorage.getItem("rxTotalSymbols"),e.rxTotalLHs=localStorage.getItem("rxTotalLHs"),e.isActive=function(e){return e===t.path()},e.ie=(o=window.navigator.userAgent,0<(a=o.indexOf("MSIE"))?parseInt(o.substring(a+5,o.indexOf(".",a))):navigator.userAgent.match(/Trident\/7\./)?11:0)}]),angular.module("infernoApp").controller("RxCtrl",["$scope",function(e){e.rxTotalSymbols=60,e.rxTotalLHs=1,localStorage.setItem("rxTotalSymbols",e.rxTotalSymbols),localStorage.setItem("rxTotalLHs",e.rxTotalLHs),e.cantoes=[{line:1,text:"When I had journeyed half of our life's way, I found my self within a shadowed forest, for I had lost the path that does not stray."},{line:4,text:"Ah, it is hard to speak of what it was, that savage forest, dense and difficult, which even in recall renews my fear:"},{line:7,text:"so bitter -- death is hardly more severe! But to retell the good discovered there, I'll also tell the other things I saw."},{line:10,text:"I cannot clearly say how I had entered the wood; I was so full of sleep just at the point where I abandoned the true path."},{line:13,text:"But when I'd reached the bottom of a hill -- it rose along the boundary of the valley that had harrassed my heart with so much fear -- "},{line:16,text:"I looked on high and saw its shoulders clothed already by the rays of that same planet which serves to lead men stragiht along all roads."},{line:19,text:"At this my fear was somewhat quieted; for through the night of sorrow I had spent, the lake within my heart felt terror present."},{line:22,text:"And just as he who, with exhausted breath, having escaped from sea to short, turns back to watch the dangerous water he has quit,"},{line:25,text:"so did my spirit, still a fugitive, turn back to look intently at the pass that never has any man survive."},{line:28,text:"I let my tired body rest awhile.  Moving again, I tried the lonely slope-- my firm foot always was the one below. "},{line:31,text:"And almost where the hillside starts to rise-- look there!-- a leopard, very quick and lithe, a leopard covered with a spotted hide."},{line:34,text:"He did not disappear from sight, but stayed; indeed, he so impeded my ascent that I had often to turn back again."},{line:37,text:"The time was the beginning of the morning; the sun was rising now in fellowship with the same stars that had escorted it"},{line:40,text:"when Divine Love first moved those things of beauty; so that the hour and the gentle season gave me good cause for hopefulness on seeing"},{line:43,text:"that beast before me with his speckled skin; but hope was hardly able to prevent the fear I felt when I beheld a lion."},{line:46,text:"His head held high and ravenous with hunger-- even the air around him seemed to shudder-- this lion seemed to make his way against me."},{line:49,text:"And then a she--wolf showed herself; she seemed to carry every craving in her leanness; she had already brought despair to many."},{line:52,text:"The very sight of her so weighted me with fearfulness that I abandoned hope of ever climbing up that mountain slope."},{line:55,text:"Even as he who glories while he gains will, when the time has come to tally loss, lament with every thought and turn despondent,"},{line:58,text:"so was I when I faced that restless beast which, even as she stalked me, step by step had thrust me back to where the sun is speechless."},{line:61,text:"While I retreated down to lower ground, before my eyes there suddenly appeared one who seemed faint because of the long silence."},{line:64,text:'When I saw him in that vast wilderness, "Have pity on me," were the words I cried, "whatever you may be--a shade, a man."'},{line:67,text:'He answered me: "Not man; I once was man.  Both of my parents came from Lombardy, and both claimed Mantua as native city.'},{line:70,text:" And I was born, though late, sub Julio, and lived in Rome under the good Augustus-- the season of the false and lying gods."},{line:73,text:" I was a poet, and I sang the righteous son of Anchises who had come from Troy when flames destroyed the pride of Ilium."},{line:76,text:' But why do you return to wretchedness?  Why not climb up the mountain of delight, the origin and cause of every joy?"'},{line:79,text:'"And are you then that Virgil, you the fountain that freely pours so rich a stream of speech?" I answered him with shame upon my brow.'},{line:82,text:'"O light and honor of all other poets, may my long study and the intense love that made me search your volume serve me now.'},{line:85,text:" You are my master and my author, you-- the only one from whom my writing drew the noble style for which I have been honored."},{line:88,text:' You see the beast that made me turn aside; help me, o famous sage, to stand against her, for she has made my blood and pulses shudder,"'},{line:91,text:'"It is another path that you must take," he answered when he saw my tearfulness, "if you would leave this savage wilderness;'},{line:94,text:" the beast that is the cause of your outcry allows no man to pass along her track, but blocks him even to the point of death;"},{line:97,text:"her nature is so squalid, so malicious that she can never sate her greedy will; when she has fed, she's hungrier than ever."},{line:100,text:"She mates with many living souls and shall yet mate with many more, until the Greyhound arrives, inflicting painful death on her."},{line:103,text:"That Hound will never feed on land or pewter, but find his fare in wisdom, love, and virtue; his place of birth shall be between two felts."},{line:106,text:"He will restore low-lying Italy for which the maid Camilla died of wounds, and Nisus, Turnus, and Euryalus."},{line:109,text:"And he will hunt that beast through every city until he thrusts her back again to Hell, for which she was first sent above by envy."},{line:112,text:" Therefore, I think and judge it best for you to follow me, and I shall guide you, taking you from this place through an eternal place,"},{line:115,text:" where you shall hear the howls of desperation and see the ancient spirits in their pain, as each of them laments his second death;"},{line:118,text:" and you shall see those souls who are content within the fire, for they hope to reach-- whenever that may be-the blessed people."},{line:121,text:" If you would then ascend as high as these, a soul more worthy than I am will guide you; I'll leave you in her care when I depart,"},{line:124,text:"because that Emperor who reigns above, since I have been rebellious to His law, will not allow me entry to His city."},{line:127,text:'He governs everywhere, but rules from there; there is His city, His high capital: o happy those He chooses to be there!"'},{line:130,text:' And I replied: "O poet-by that God whom you had never come to know-- I beg you, that I may flee this evil and worse evils,'},{line:133,text:' to lead me to the place of which you spoke, that I may see the gateway of Saint Peter and those whom you describe as sorrowful."'},{line:136,text:" Then he set out, and I moved on behind him.  "}]}]),angular.module("infernoApp").controller("TxCtrl",["$scope","fileReader",function(o,e){o.visible=!1,o.parseCSV=function(e,t){var o=e.split(/\r\n|\r|\n/g);for(var a in o){for(var n,l=o[a].split(t=t||","),r=l.length-1;0<=r;r--)'"'==l[r].replace(/"\s+$/,'"').charAt(l[r].length-1)?1<(n=l[r].replace(/^\s+"/,'"')).length&&'"'==n.charAt(0)?l[r]=l[r].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"'):r?l.splice(r-1,2,[l[r-1],l[r]].join(t)):l=l.shift().split(t).concat(l):l[r].replace(/""/g,'"');o[a]=l}return o},o.getFile=function(){o.progress=0,o.textSrc="",o.totalSymbols=0,o.totalLHs=0,localStorage.setItem("totalSymbols",o.totalSymbols),localStorage.setItem("totalLHs",o.totalLHs),e.readAsText(o.file,o).then(function(e){o.textSrc=e,o.lines=o.parseCSV(e,","),o.lines.forEach(function(e){/LH/.test(e)&&(o.totalSymbols+=e.length-4,o.totalLHs++)}),localStorage.setItem("totalSymbols",o.totalSymbols),localStorage.setItem("totalLHs",o.totalLHs),console.log(typeof e),console.log(typeof o.textSrc)})},o.$on("fileProgress",function(e,t){o.progress=t.loaded/t.total})}]).directive("ngFileSelect",function(){return{link:function(t,e){e.bind("change",function(e){t.file=(e.srcElement||e.target).files[0],t.getFile()})}}}).factory("fileReader",["$q","$log",function(a,e){e.log("fileReader");return{readAsText:function(e,t){var o=a.defer();return function(e,t){var o=new FileReader;return o.onload=function(e,t,o){return function(){o.$apply(function(){t.resolve(e.result)})}}(o,e,t),o.onerror=function(e,t,o){return function(){o.$apply(function(){t.reject(e.result)})}}(o,e,t),o.onprogress=function(e,t){return function(e){t.$broadcast("fileProgress",{total:e.total,loaded:e.loaded})}}(0,t),o}(o,t).readAsText(e),o.promise}}}]),angular.module("infernoApp").run(["$templateCache",function(e){e.put("views/main.html",'<div class="jumbotron jumbotron-fluid"> <div class="container"> <div class="block"> <h1 class="animated fadeInUp">Inferno</h1> <div ng-hide="ie == 0"> <p class="animated fadeInUp">IE {{ie}}</p> </div> </div> </div> </div> <div class="container"> <p> <strong> Summary </strong> </p> <table class="table table-striped"> <tr> <th> </th> <th> Tx</th> <th> Rx</th> <th> Percentage</th> </tr> <tr> <td> symbols </td> <td>{{txTotalSymbols}} </td> <td>{{rxTotalSymbols}} </td> <td>{{rxTotalSymbols /txTotalSymbols * 100 | number : 2}} </td> </tr> <tr><td> sequences </td> <td> {{txTotalLHs}} </td> <td> {{rxTotalLHs}} </td> <td> {{rxTotalLHs/txTotalLHs * 100 | number : 2}} </td> </tr> </table> </div> '),e.put("views/rx.html",'<div class="container" tabindex="0"> <div class="row"> <div class="col-md-12"> <div class="bs-example"> <table class="table table-bordered"> <tbody> <tr ng-repeat="item in cantoes"> <td class="canto"> <pre class="canto"> {{item.text | split  }} </pre> </td> <td class="linenumber"> <p class="linenumber"> {{item.line}}</p> </td> </tr> </tbody> </table> </div> </div> </div> </div> '),e.put("views/tx.html",'<div class="container"> <form> <div class="row"> <div class="col-md-12"> <input type="file" ng-file-select="onFileSelect($files)" class="form-control-file border"> </div> </div> </form> <br> <b>Statistics:</b><br> <table class="table table-striped"> <tr> <th>Name</th> <th>Counts </th> </tr> <tr> <td>Total Symbols </td> <td>{{totalSymbols}}</td> </tr> <tr> <td>Total Sequences </td> <td>{{totalLHs}}</td> </tr> </table> <b>Preview:</b> <input ng-model="visible" type="checkbox"> <br> <i ng-hide="textSrc">No text file choosed</i> <pre ng-show="visible">{{textSrc}}</pre> <br> <b>Progress:</b> <progress value="{{progress}}"></progress> </div> ')}]);